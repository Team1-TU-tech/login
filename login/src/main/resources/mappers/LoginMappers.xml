<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.login.login.mapper.LoginMapper">
        <select id="findAll" resultType="com.login.login.entity.LoginEntity">
                SELECT
                        NUM, FIRSTNAME, LASTNAME, ID, PASSWD, EMAIL, GENDER, BIRTHDAY, PHONENUMBER
                FROM LOGIN_TB
                ORDER BY num DESC
        </select>

        <select id="findById" parameterType="String" resultType="com.login.login.entity.LoginEntity">
        SELECT
					NUM, FIRSTNAME, LASTNAME, ID, PASSWD, EMAIL, GENDER, BIRTHDAY, PHONENUMBER
				FROM LOGIN_TB 
				WHERE id = #{id};
    </select>

        <select id="findByOptionalParams" parameterType="map" resultType="com.login.login.entity.LoginEntity">
    SELECT * FROM LOGIN_TB
    WHERE 1=1
    <if test="id != null">
        AND ID = #{id}
    </if>
    <if test="phonenumber != null">
        AND PHONENUMBER = #{phonenumber}
    </if>
    <if test="password != null">
        AND PASSWD = #{password}
    </if>
    <if test="email != null">
        AND EMAIL = #{email}
    </if>
</select>

        <insert id="createLogin">
        INSERT INTO LOGIN_TB(FIRSTNAME, LASTNAME, ID, PASSWD, EMAIL, GENDER, BIRTHDAY, PHONENUMBER)
        VALUES (#{firstname}, #{lastname}, #{id}, #{passwd}, #{email}, #{gender}, #{birthday}, #{phonenumber})
        </insert>

        <update id="updateLoginById">
        UPDATE LOGIN_TB
        <set>
        <!-- null이 아닌 필드만 업데이트 -->
        <if test="firstname != null">firstname = #{firstname},</if>
        <if test="lastname != null">lastname = #{lastname},</if>
        <if test="id != null">id = #{id},</if>
        <if test="passwd != null">passwd = #{passwd},</if>
        <if test="email != null">email = #{email},</if>
        <if test="gender != null">gender = #{gender},</if>
        <if test="birthday != null">birthday = #{birthday},</if>
        <if test="phonenumber != null">phonenumber = #{phonenumber},</if>
    </set>
    WHERE id = #{id}
    </update>

        <delete id="deleteLoginById">
        DELETE FROM LOGIN_TB
        WHERE id = #{id}
        </delete>

</mapper>